{% extends 'estoque/base.html' %}

{% block title %}{{ produto.nome }} - Loja de Eletronicos{% endblock %}

{% block extra_css %}
    {{ block.super }} 

{% endblock %}

{% block content %}

<div class="row">
    <div class="col-md-6">
        {% if produto.imagem %}
        <img src="{{ produto.imagem.url }}" class="img-fluid rounded" alt="{{ produto.nome }}">
        {% else %}
        <img src="https://via.placeholder.com/600x400.png?text=Sem+Imagem" class="img-fluid rounded" alt="Sem Imagem">
        {% endif %}
    </div>
    <div class="col-md-6">
        <h1>{{ produto.nome }}</h1>
        <p class="lead">{{ produto.descricao }}</p>
        <hr>
        <h3 class="text-success"><strong>Preço:</strong> R$ {{ produto.preco }}</h3>
        <p><strong>Em estoque:</strong> {{ produto.estoque }} unidades</p>
        <p><strong>Status:</strong> 
            {% if produto.disponivel %}
                <span class="badge bg-success">Disponível</span>
            {% else %}
                <span class="badge bg-danger">Indisponível</span>
            {% endif %}
        </p>
        <p><strong>Categoria:</strong> {{ produto.categoria.identificacao|default:"N/A" }}</p>
        <div class="mb-3">
            <strong>Tags:</strong>
            {% for tag in produto.tag.all %}
            <span class="badge bg-secondary">{{ tag.identificacao }}</span>
            {% empty %}
            <span class="badge bg-light text-dark">Nenhuma tag</span>
            {% endfor %}
        </div>
        <hr>
        
        <!-- Botões de ação -->
        <div class="d-grid gap-2 mb-3">
            {% if produto.disponivel and produto.estoque > 0 %}
            <a href="{% url 'estoque:checkout' produto.pk %}" class="btn btn-success btn-lg">
                <i class="bi bi-cart-plus"></i> Comprar Agora
            </a>
            {% else %}
            <button class="btn btn-secondary btn-lg" disabled>
                <i class="bi bi-x-circle"></i> Produto Indisponível
            </button>
            {% endif %}
        </div>
        
        <div class="d-flex gap-2">
            <a href="{% url 'estoque:produto_update' produto.pk %}" class="btn btn-warning">
                <i class="bi bi-pencil"></i> Editar Produto
            </a>
            <a href="{% url 'estoque:produto_list' %}" class="btn btn-secondary">
                <i class="bi bi-arrow-left"></i> Voltar para a Lista
            </a>
        </div>
    </div>
</div>

{% endblock %}